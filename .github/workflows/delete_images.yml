name: 'Delete Images from List'
on:
  workflow_dispatch:

  schedule: ## Kjører kl. 05:00 mandag (schedule kjører bare for Default branch)
    - cron: '0 5 * * 1'

jobs:
  remove-images:
    name: Delete Old Images from ${{ matrix.package-name }}
    runs-on: ubuntu-latest
    permissions:
      packages: write
    strategy:
      matrix:
        package-name:
          - 'sosialhjelp-soknad-api/sosialhjelp-soknad-api'
          - 'sosialhjelp-soknad/sosialhjelp-soknad'
          - 'sosialhjelp-innsyn/sosialhjelp-innsyn'
          - 'sosialhjelp-innsyn-api/sosialhjelp-innsyn-api'
    steps:
      - uses: actions/delete-package-versions@v4
        with:
          package-name: ${{ matrix.package-name }}
          package-type: 'container'
          min-versions-to-keep: 50
